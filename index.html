<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Multi-Purpose Search Query Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f4f6fb;
      --fg: #1f2937;
      --muted: #6b7280;
      --card: white;
      --accent1: #06b6d4;
      --accent2: #3b82f6;
      --border: #e5e7eb;
      --radius: 14px;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--fg);
      padding: 40px;
      display: flex;
      justify-content: center;
    }
    .container {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 10px 35px rgba(0,0,0,0.05);
      max-width: 880px;
      width: 100%;
      padding: 32px;
    }
    h1 {
      font-size: 26px;
      font-weight: 600;
      margin-bottom: 6px;
      background: linear-gradient(to right, var(--accent1), var(--accent2));
      -webkit-background-clip: text;
      color: transparent;
    }
    p.sub { color: var(--muted); margin-bottom: 20px; }
    label.small {
      font-size: 13px; color: var(--muted);
      display: block; margin-bottom: 6px;
    }
    input[type=text], select {
      width: 100%;
      padding: 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-size: 14px;
      transition: border 0.2s;
    }
    input[type=text]:focus, select:focus {
      border-color: var(--accent1);
      outline: none;
    }
    .row { display: flex; gap: 12px; flex-wrap: wrap; }
    .col { flex: 1 1 260px; }
    /* Toggle style */
    .mode-toggle {
      display: flex; gap: 20px; margin-top: 16px;
    }
    .toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      cursor: pointer;
    }
    .toggle input { display: none; }
    .slider {
      width: 50px; height: 26px;
      background: #d1d5db;
      border-radius: 999px;
      position: relative;
      transition: background 0.3s;
      margin-right: 8px;
    }
    .slider::before {
      content: "";
      position: absolute;
      width: 22px; height: 22px;
      background: white;
      border-radius: 50%;
      top: 2px; left: 2px;
      transition: transform 0.3s;
      box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    }
    input:checked + .slider {
      background: linear-gradient(to right, var(--accent1), var(--accent2));
    }
    input:checked + .slider::before {
      transform: translateX(24px);
    }
    .controls {
      display: flex; gap: 10px; flex-wrap: wrap;
      margin-top: 20px;
    }
    button {
      padding: 10px 18px;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      background: linear-gradient(to right, var(--accent1), var(--accent2));
      color: white;
      transition: transform 0.15s ease;
    }
    button:hover { transform: translateY(-2px); }
    button.secondary {
      background: #4b5563;
    }
    button.ghost {
      background: #e5e7eb; color: var(--fg);
    }
    .output {
      margin-top: 16px;
      background: #1e293b;
      color: #e2e8f0;
      padding: 14px;
      border-radius: var(--radius);
      font-family: monospace;
      height: 360px;
      overflow: auto;
      font-size: 13px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
    }
    .meta {
      margin-top: 8px;
      color: var(--muted);
      font-size: 13px;
    }
    .chip {
      padding: 3px 8px;
      border-radius: 999px;
      background: #c7d2fe;
      color: #3730a3;
      font-size: 12px;
    }
    footer {
      margin-top: 14px;
      color: var(--muted);
      font-size: 12px;
      text-align: center;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Multi-Purpose Search Query Generator</h1>
  <p class="sub">Generate robust search query variants instantly and add to your set up!.</p>

  <div class="row">
    <div class="col">
      <label class="small" for="category">Category</label>
      <select id="category">
        <option value="restaurant">Restaurant Name</option>
        <option value="meal">Meal Name</option>
        <option value="pharmacy">Pharmacy Name</option>
        <option value="pharmacy_item">Pharmacy Item</option>
        <option value="shop_item">Shop Item</option>
      </select>
    </div>
    <div class="col" style="flex:2">
      <label class="small" for="nameInput">Name</label>
      <input id="nameInput" type="text" placeholder="e.g. Palm Eatery / Paracetamol / Shoprite" />
    </div>
  </div>

  <div class="mode-toggle">
    <label class="toggle">
      <input type="radio" name="mode" id="modeAggressive" checked>
      <span class="slider"></span>
      Aggressive Mode
    </label>
    <label class="toggle">
      <input type="radio" name="mode" id="modeNormal">
      <span class="slider"></span>
      Normal Mode
    </label>
  </div>

  <div class="controls">
    <button id="genBtn">Generate</button>
    <button id="copyAll" class="secondary">Copy All</button>
    <button id="csvBtn" class="secondary">Download CSV</button>
    <button id="clearBtn" class="ghost">Clear</button>
  </div>

  <div id="output" class="output"><pre id="outText">(no output yet)</pre></div>
  <div class="meta" id="count">Total: 0 • Mode: <span class="chip" id="modeChip">Aggressive</span> • Case-insensitive</div>

  <footer>Tip: Choose your mode, type a name, and click Generate.</footer>
</div>

<script>
const els = {
  category: document.getElementById('category'),
  nameInput: document.getElementById('nameInput'),
  modeAggressive: document.getElementById('modeAggressive'),
  modeNormal: document.getElementById('modeNormal'),
  genBtn: document.getElementById('genBtn'),
  copyAll: document.getElementById('copyAll'),
  csvBtn: document.getElementById('csvBtn'),
  clearBtn: document.getElementById('clearBtn'),
  outText: document.getElementById('outText'),
  count: document.getElementById('count'),
  modeChip: document.getElementById('modeChip')
};

const CATEGORY_SUFFIXES = {
  restaurant: ['restaurant','eatery','food joint','kitchen','spot','place'],
  meal: ['food','dish','meal','special'],
  pharmacy: ['pharmacy','chemist','drugstore','medicals'],
  pharmacy_item: ['tablet','capsule','ointment','syrup','cream'],
  shop_item: ['product','item']
};
const INTENT_TERMS = ['near me','price','buy','order','how much','menu','promo'];

const lower = s => (s||'').toLowerCase().trim();
const uniq = arr => Array.from(new Set(arr.filter(Boolean)));
const escapeRe = s => s.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&");

function urlEncVariants(s){
  return [s, s.replace(/&/g, '%26'), s.replace(/\s/g, '%20'), s.replace(/\s/g, '\u202F')];
}
function punctVariants(s){
  return [s, s.replace(/['’]/g, ''), s.replace(/&/g,' and '), s.replace(/\./g,''), s.replace(/-/g,' '), s.replace(/\s+/g,' ')];
}
function typoVariations(word, aggressive){
  word = lower(word);
  const t = new Set();
  const vowels = 'aeiou';
  if(!word) return [];
  for(let i=0;i<word.length;i++) t.add(word.slice(0,i)+word.slice(i+1));
  for(let i=0;i<word.length-1;i++) t.add(word.slice(0,i)+word[i+1]+word[i]+word.slice(i+2));
  for(let i=0;i<word.length;i++) t.add(word.slice(0,i)+word[i]+word[i]+word.slice(i+1));
  for(let i=0;i<word.length;i++) if(vowels.includes(word[i])){
    for(const v of vowels) if(v!==word[i]) t.add(word.slice(0,i)+v+word.slice(i+1));
  }
  if(aggressive){
    for(let i=2;i<=word.length;i++) t.add(word.slice(0,i));
    t.add([...word].filter((_,i)=>i%2===0).join(''));
  }
  t.delete('');
  return Array.from(t);
}
function generateWordVariants(word, aggressive){
  const v = new Set([lower(word)]);
  typoVariations(word, aggressive).forEach(x=>v.add(x));
  const phon = {
    'ph':'f','aa':'a','ie':'y','ea':'e','ee':'i','ck':'k','c':'k','k':'c','gh':'g','ou':'u','sh':'s','ch':'c'
  };
  for(const [src,rep] of Object.entries(phon)){
    if(word.includes(src)) v.add(lower(word).split(src).join(rep));
  }
  if(aggressive){
    if(word.length>3) v.add(word.slice(0,3));
    if(word.length>4) v.add(word.slice(0,4));
  }
  return uniq([...v]);
}
function safeReplaceWord(text, oldW, newW){
  return text.replace(new RegExp('\\b'+escapeRe(oldW)+'\\b','g'), newW);
}

function baseVariants(name, category){
  name = lower(name);
  if(!name) return [];
  const words = name.split(/\s+/).filter(Boolean);
  const out = new Set();
  out.add(name);
  out.add(words.join(''));
  out.add(words.join('-'));
  if(words.length>1){
    out.add(`${words[0]} ${words[1][0]}`);
    out.add(`${words[0]} ${words[1].slice(0,3)}`);
    out.add(words.slice().reverse().join(' '));
  }
  for(const w of words){
    generateWordVariants(w, false).forEach(x=>out.add(x));
  }
  for(const w of words){
    for(const tw of typoVariations(w, false)){
      out.add(safeReplaceWord(name, w, tw));
    }
  }
  const phonFull = {'aa':'a','ie':'y','ea':'e','ee':'i','ck':'k','c':'k','k':'c'};
  for(const [src,rep] of Object.entries(phonFull)){
    if(name.includes(src)) out.add(name.split(src).join(rep));
  }
  const suff = CATEGORY_SUFFIXES[category] || [];
  for(const s of suff){ if(!name.endsWith(s)) out.add(`${name} ${s}`); }
  for(const it of INTENT_TERMS){ out.add(`${name} ${it}`); }
  const more = new Set();
  for(const v of out){
    punctVariants(v).forEach(x=>more.add(x));
    urlEncVariants(v).forEach(x=>more.add(x));
  }
  more.forEach(x=>out.add(x));
  return uniq([...out]);
}

function aggressiveExtras(name, category){
  const words = name.split(/\s+/).filter(Boolean);
  const out = new Set();
  for(const w of words){
    generateWordVariants(w, true).forEach(x=>out.add(x));
  }
  for(const w of words){
    for(const tw of typoVariations(w, true)){
      out.add(safeReplaceWord(name, w, tw));
    }
  }
  return uniq([...out]);
}

function generateVariants(name, category, aggressive){
  let base = baseVariants(name, category);
  if(aggressive){
    base = uniq([...base, ...aggressiveExtras(name, category)]);
  }
  return base.sort();
}

function render(list, aggressive){
  if(list.length===0){
    els.outText.textContent='(no output yet)';
    els.count.textContent='Total: 0';
    return;
  }
  els.outText.textContent = list.join('\n');
  els.count.textContent = `Total: ${list.length} • Mode: ${aggressive? 'Aggressive':'Normal'} • Case-insensitive`;
  els.modeChip.textContent = aggressive? 'Aggressive':'Normal';
}

async function copy(text){
  try{ await navigator.clipboard.writeText(text); return true; }catch{ return false; }
}

els.genBtn.addEventListener('click', ()=>{
  const aggressive = els.modeAggressive.checked;
  const list = generateVariants(els.nameInput.value, els.category.value, aggressive);
  render(list, aggressive);
});
els.copyAll.addEventListener('click', async ()=>{
  const ok = await copy(els.outText.textContent||'');
  alert(ok? 'All variants copied to clipboard' : 'Copy failed — select and copy manually');
});
els.csvBtn.addEventListener('click', ()=>{
  const text = els.outText.textContent;
  if(!text || text.includes('(no output yet)')){
    alert('No variants to download — generate first');
    return;
  }
  const rows = text.split('\n').map(r=>`"${r.replace(/"/g,'""')}"`).join('\n');
  const csvContent = 'variant\n' + rows;
  const blob = new Blob([csvContent], {type: 'text/csv;charset=utf-8;'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'search_query_variants.csv';
  document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
});
els.clearBtn.addEventListener('click', ()=>{
  els.outText.textContent='(no output yet)';
  els.count.textContent='Total: 0';
});
els.nameInput.addEventListener('keydown', e=>{
  if(e.key==='Enter'){ e.preventDefault(); els.genBtn.click(); }
});
</script>
</body>
</html>
